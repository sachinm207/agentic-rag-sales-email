# Agentic RAG Sales Email Personalizer

Build a sales email personalizer that progresses from basic prompting through RAG to a full agentic loop — all on Amazon Bedrock with Nova Pro.

## What This Does

Three approaches to generating sales emails, each building on the last:

1. **Baseline** — prompt the model with zero context. Generic output.
2. **RAG** — retrieve prospect info from a vector store first, then generate. Better, but rigid.
3. **Agentic RAG** — give the model tools and let it decide what to research. It calls `search_knowledge_base`, `get_prospect_profile`, and `search_industry_insights` in a loop until it has enough context to write a genuinely personalized email.

## Project Structure

```
├── prospect_profiles.json          # 9 fictional prospect companies
├── 01_build_knowledge_base.py      # Embed profiles with Titan Embeddings V2
├── 02_baseline_no_context.py       # Email with no context
├── 03_rag_email_generator.py       # RAG-enhanced email
├── 04_agentic_email_personalizer.py # Full agentic loop with tool use
├── 05_email_validator.py           # LLM-as-judge email validation
├── vector_store.json               # Generated by 01 (not committed)
├── benchmark_results.json          # Generated by running scripts (not committed)
├── requirements.txt
└── README.md
```

## Quick Start

```bash
pip install -r requirements.txt

# 1. Build the knowledge base (creates vector_store.json)
python 01_build_knowledge_base.py

# 2. Run each approach
python 02_baseline_no_context.py
python 03_rag_email_generator.py
python 04_agentic_email_personalizer.py

# 3. Validate an email
python 05_email_validator.py
```

## Prerequisites

- AWS account with Bedrock access enabled for:
  - Amazon Nova Pro (`us.amazon.nova-pro-v1:0`)
  - Amazon Titan Text Embeddings V2 (`amazon.titan-embed-text-v2:0`)
- IAM permissions: `bedrock:InvokeModel`
- Python 3.10+
- Region: us-east-1

## Results

Tested against "DataPulse Analytics" (fintech, 450 employees, post-Series C):

| Approach | Input Tokens | Output Tokens | Latency | Cost |
|----------|-------------|---------------|---------|------|
| Baseline | 38 | 133 | 2.43s | $0.0005 |
| RAG | 280 | 174 | 2.18s | $0.0008 |
| Agentic RAG | 2,513 | 418 | 9.23s | $0.0033 |

The agentic approach costs ~7x more per email but the output quality is in a different league. At $0.003 per email, you could personalize 10,000 emails for $33.

## Cost

Running all scripts end-to-end costs roughly $0.10-0.20 in Bedrock inference charges. The embedding step (36 chunks) is the bulk of the API calls but Titan Embeddings is cheap.
